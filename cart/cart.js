// var products = [
//   {
//     img: "../Products/book1.webp",
//     title: "Wolfsong",
//     price: "29.99 $",
//     quantity: 1,
//   },
//   {
//     img: "book2.webp",
//     title: "Dragonfall",
//     price: "34.05 $",
//     style: "height: 100%",
//     quantity: 1,
//   },
//   {
//     img: "book3.webp",
//     title: "Apprentice to the Villain",
//     price: "19.40 $",
//     style: "height: 100%",
//     quantity: 1,
//   },
//   {
//     img: "book4.webp",
//     title: "Under the Whispering Door",
//     price: "21.23 $",
//     quantity: 1,
//   },
//   {
//     img: "book5.webp",
//     title: "The House in the Cerulean Sea",
//     price: "38.04 $",
//   },
//   {
//     img: "book6.webp",
//     title: "Beastologist",
//     price: "25.92 $",
//     style: "height: 100%",
//   },
//   {
//     img: "./book7.webp",
//     title: "The Phantom Tollbooth",
//     price: "24.10 $",
//     style: "height: 100%",
//   },
//   {
//     img: "book8.webp",
//     title: "Percy Jackson",
//     price: "19.06 $",
//     style: "height: 100%",
//   },
//   {
//     img: "book9.webp",
//     title: "Adventure Time",
//     price: "34.99 $",
//     style: "height: 100%",
//   },
//   {
//     img: "book10.webp",
//     title: "Daydream",
//     price: "38.00 $",
//     style: "height: 100%",
//   },
//   {
//     img: "book11.webp",
//     title: "Twelfth Knight",
//     price: "29.19 $",
//   },
//   {
//     img: "book12.webp",
//     title: "We Deserve Monuments",
//     price: "24.90 $",
//   },
//   {
//     img: "book13.webp",
//     title: "Swift River",
//     price: "15.30 $",
//     style: "height: 100%",
//   },
//   {
//     img: "book14.webp",
//     title: "Bookshops & Bonedust",
//     price: "34.70 $",
//   },
//   {
//     img: "book15.webp",
//     title: "Legends & Lattes",
//     price: "39.29 $",
//   },
//   {
//     img: "book16.webp",
//     title: "Assistant To The Villain",
//     price: "29.79 $",
//     style: "height: 100%",
//   },
//   {
//     img: "book17.webp",
//     title: "Wood Pellet Smoker And Girl",
//     price: "24.95 $",
//   },
//   {
//     img: "book18.webp",
//     title: "Outdoor Cookery",
//     price: "59.90 $",
//     style: "height: 100%",
//   },
//   {
//     img: "book19.webp",
//     title: "Cooking The Books",
//     price: "34.45 $",
//     style: "height: 100%",
//   },
//   {
//     img: "book20.webp",
//     title: "Be Ready When The Luck Happens",
//     price: "39.40 $",
//     style: "height: 100%",
//   },
// ];

// var kids = [
//   {
//     img: "book1.webp",
//     title: "Wolfsong",
//     price: "29.99 $",
//   },
//   {
//     img: "book2.webp",
//     title: "Dragonfall",
//     price: "34.05 $",
//     style: "height: 100%",
//   },
//   {
//     img: "book3.webp",
//     title: "Apprentice to the Villain",
//     price: "19.40 $",
//     style: "height: 100%",
//   },
//   {
//     img: "book4.webp",
//     title: "Under the Whispering Door",
//     price: "21.23 $",
//   },
//   {
//     img: "book5.webp",
//     title: "The House in the Cerulean Sea",
//     price: "38.04 $",
//   },
//   {
//     img: "book6.webp",
//     title: "Beastologist",
//     price: "25.92 $",
//     style: "height: 100%",
//   },
//   {
//     img: "./book7.webp",
//     title: "The Phantom Tollbooth",
//     price: "24.10 $",
//     style: "height: 100%",
//   },
//   {
//     img: "book8.webp",
//     title: "Percy Jackson",
//     price: "19.06 $",
//     style: "height: 100%",
//   },
//   {
//     img: "book9.webp",
//     title: "Adventure Time",
//     price: "34.99 $",
//     style: "height: 100%",
//   },
// ];

// var romance = [
//   {
//     img: "book10.webp",
//     title: "Daydream",
//     price: "38.00 $",
//     style: "height: 100%",
//   },
//   {
//     img: "book11.webp",
//     title: "Twelfth Knight",
//     price: "29.19 $",
//   },
//   {
//     img: "book12.webp",
//     title: "We Deserve Monuments",
//     price: "24.90 $",
//   },
//   {
//     img: "book13.webp",
//     title: "Swift River",
//     price: "15.30 $",
//     style: "height: 100%",
//   },
//   {
//     img: "book14.webp",
//     title: "Bookshops & Bonedust",
//     price: "34.70 $",
//   },
//   {
//     img: "book15.webp",
//     title: "Legends & Lattes",
//     price: "39.29 $",
//   },
//   {
//     img: "book16.webp",
//     title: "Assistant To The Villain",
//     price: "29.79 $",
//     style: "height: 100%",
//   },
// ];

// var cook = [
//   {
//     img: "book17.webp",
//     title: "Wood Pellet Smoker And Girl",
//     price: "24.95 $",
//   },
//   {
//     img: "book18.webp",
//     title: "Outdoor Cookery",
//     price: "59.90 $",
//     style: "height: 100%",
//   },
//   {
//     img: "book19.webp",
//     title: "Cooking The Books",
//     price: "34.45 $",
//     style: "height: 100%",
//   },
//   {
//     img: "book20.webp",
//     title: "Be Ready When The Luck Happens",
//     price: "39.40 $",
//     style: "height: 100%",
//   },
// ];

function goToProducts() {
  window.location.href = "../products/products.html";
}

function goToCart() {
  window.location.href = "../cart/cart.html";
}

function logout() {
  window.location.href = "../Login/login.html";
}

function goToHome() {
  window.location.href = "../Home/home.html";
}

function goToEnd() {
  window.location.href = "../End/end.html";
  localStorage.removeItem("cart");
}

var users = JSON.parse(localStorage.getItem("users"));

var usernameElement = document.getElementById("username");

if (users[0].name != null || users[0].name != undefined) {
  usernameElement.innerHTML = users[0].name;
} else {
  usernameElement.innerHTML = "Guest";
}

var topButton = document.getElementById("topButton");

window.onscroll = function () {
  scrollFunction();
};

function scrollFunction() {
  if (document.body.scrollTop > 20 || document.documentElement.scrollTop > 20) {
    topButton.style.display = "block";
  } else {
    topButton.style.display = "none";
  }
}

topButton.addEventListener("click", function () {
  document.body.scrollTop = 0;
  document.documentElement.scrollTop = 0;
});

//

//

function displayCart() {
  var cartContainer = document.getElementById("cart-container");
  var cart = JSON.parse(localStorage.getItem("cart")) || [];

  if (cart.length === 0) {
    cartContainer.innerHTML = "<p>Your cart is empty.</p>";
    return;
  }

  cartContainer.innerHTML = "";
  var total = 0;

  for (var i = 0; i < cart.length; i++) {
    var product = cart[i];
    var totalPriceForProduct = product.price * product.quantity;
    total += totalPriceForProduct;

    var productDiv = document.createElement("div");
    productDiv.className = "cart-item";
    productDiv.innerHTML =
      '<img src="' +
      product.img +
      '" class="cart-item-image"  /><div class="parent-p">' +
      "<p style ='color: #007bff; font-weight: bold'>" +
      product.name +
      "</p>" +
      "<p style='color: #555;font-weight: bold;margin-top: 5px;'> $" +
      product.price +
      "</p>" +
      "<p> <button onclick=\"decreaseQuantity('" +
      product.name +
      "')\">-</button> " +
      product.quantity +
      " <button onclick=\"increaseQuantity('" +
      product.name +
      "')\">+</button></p>" +
      "<p style='color: #333;font-weight: bold;font-size: 25px;margin: 15px 35px 5px;'>Total:  $" +
      totalPriceForProduct +
      "</p></div>";
    cartContainer.appendChild(productDiv);
  }

  var totalDiv = document.createElement("div");
  totalDiv.className = "cart-total";
  totalDiv.textContent = "Total: $" + total.toFixed(2);
  cartContainer.appendChild(totalDiv);
}

function increaseQuantity(productName) {
  var cart = JSON.parse(localStorage.getItem("cart")) || [];

  var productIndex = cart.findIndex(function (item) {
    return item.name === productName;
  });

  if (productIndex !== -1) {
    cart[productIndex].quantity++;
    localStorage.setItem("cart", JSON.stringify(cart));
    displayCart();
  }
}

function decreaseQuantity(productName) {
  var cart = JSON.parse(localStorage.getItem("cart")) || [];

  var productIndex = cart.findIndex(function (item) {
    return item.name === productName;
  });

  if (productIndex !== -1) {
    if (cart[productIndex].quantity > 1) {
      cart[productIndex].quantity--;
    } else {
      cart.splice(productIndex, 1);
    }

    localStorage.setItem("cart", JSON.stringify(cart));
    displayCart();
  }
}
